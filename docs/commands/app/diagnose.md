# –ö–æ–º–∞–Ω–¥–∞: `diagnose` ü©∫

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø–æ–¥–æ–≤ —Å –ø–æ–º–æ—â—å—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ Shovel. –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã (`trace`, `dump`, `gcdump`, `coredump`) –Ω–∞ –æ–¥–Ω–æ–º –∏–ª–∏ –≤—Å–µ—Ö –ø–æ–¥–∞—Ö –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –Ω–µ–π–º—Å–ø–µ–π—Å–µ.

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (Usage)

```bash
dodo app diagnose [service] [flags]
```

---

## –ê—Ä–≥—É–º–µ–Ω—Ç—ã
  
**`[service]`** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π): –ò–º—è —Å–µ—Ä–≤–∏—Å–∞, –ø–æ–¥—ã –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å.

---

## –§–ª–∞–≥–∏ (Flags)

| –§–ª–∞–≥          | –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                     |
|:--------------|:-----------| :--|:-------------------------------------------------------------------------------------------------------------|
| `--method`    | `-m`       | `string` | **(–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)** –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –ø–æ–¥–µ. –î–æ—Å—Ç—É–ø–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: `trace`, `dump`, `gcdump`, `coredump`. |
| `--context`   | `-c`       | `string` | –ò–º—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è –∫–æ–º–∞–Ω–¥—ã                                       |
| `--namespace` | `-n`       | `string` | **(–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)** –ù–µ–π–º—Å–ø–µ–π—Å Kubernetes, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å–µ—Ä–≤–∏—Å.                                         |
| `--pod`       | `-p`       | `string` | –ò–º—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–¥–∞ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å —Ñ–ª–∞–≥–æ–º `-a`.                                  |
| `--all`       | `-a`       | `bool` | –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –∫–æ –≤—Å–µ–º –ø–æ–¥–∞–º üì¶ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.                                                       |
| `--dir`       | -          | `string` | –ü—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ üìÇ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.                                                 |

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è üöÄ

### 1. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–¥–∞

–ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å `dump` –¥–ª—è –ø–æ–¥–∞ `auth-service-pod-123` —Å–µ—Ä–≤–∏—Å–∞ `auth-service` –≤ –Ω–µ–π–º—Å–ø–µ–π—Å–µ `auth`:

```bash
dodo app diagnose auth-service -c dump -n auth -p auth-service-pod-123 -c d-yandex
```

### 2. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö –ø–æ–¥–æ–≤ —Å–µ—Ä–≤–∏—Å–∞

–ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å `gcdump` –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–æ–≤ —Å–µ—Ä–≤–∏—Å–∞ `auth-service` –≤ –Ω–µ–π–º—Å–ø–µ–π—Å–µ `auth`:

```bash
dodo app diagnose auth-service -c gcdump -n auth -a
```

### 3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —É–∫–∞–∑–∞–Ω–Ω—É—é –ø–∞–ø–∫—É

–ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –¥–∞–º–ø—ã –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–æ–≤ —Å–µ—Ä–≤–∏—Å–∞ `auth-service` –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Ö –≤ –ø–∞–ø–∫—É `/tmp/dumps`:

```bash
dodo app diagnose auth-service -c dump -n auth -a -dir /tmp/dumps
```
